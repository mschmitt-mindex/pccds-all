"use strict";!function(){var e="any",t="all",r="ff-compile-rules",a=new WeakMap,n=function(){var e=document.createEvent("Event");return e.initEvent(r,!0,!0),e},s=function(e){return new RegExp("^".concat(e.split(/\*+/).map(i).join(".*"),"$"),"i")},i=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},o=function(r){var n=r.target,i=a.get(n),o=i.targets,l=i.rule,c=l.type,u=l.show,v=c===t;for(var f in o)if(o.hasOwnProperty(f)){for(var d=o[f],p=d.elements,h=d.operand,g=d.value,m=[],y=!1,k=0;k<p.length;k++){var w=p[k],b=w.getAttribute("type");["checkbox","radio"].indexOf(b)!==-1?(y=!0,w.checked&&("checkbox"!==b||/\]$/.test(w.name)?m.push(w.value.toLowerCase()):m.push("1"))):m.push(w.value.toLowerCase())}var E=void 0;if(y&&""===g)E="="===h?!m.length:!!m.length;else{for(var x=s(g),L=!1,O=0;O<m.length;O++){var $=m[O];x.test($)&&(L=!0)}E="="===h?L:!L}if(c===e&&E){v=!0;break}c!==t||E||(v=!1)}n.style.display=v?u?"block":"none":u?"none":"block"},l=function(e){var t=e.tagName.toLowerCase();return["select","textarea"].indexOf(t)!==-1?t:e.classList.contains("form-date-time-field")?"date":e.getAttribute("type").toLowerCase()},c=document.querySelectorAll("form[data-has-rules]");for(var u in c)if(c.hasOwnProperty(u)){var v=c[u],f=v.querySelectorAll("*[data-ff-rule]"),d=function(e){if(!f.hasOwnProperty(e))return"continue";var t=f[e],s=t.dataset.ffRule;/^'.*'$/.test(s)&&(s=s.substring(1,s.length-1));var i=JSON.parse(s),c=[];for(var u in i.criteria)if(i.criteria.hasOwnProperty(u)){var d=i.criteria[u],p=d.tgt,h=d.o,g=d.val,m=void 0,y=!1;if(v.elements[p]){var k=v.elements[p].tagName;m=k?[v.elements[p]]:v.elements[p]}else v.elements[p+"[]"]&&(m=v.elements[p+"[]"],y=!0);c.push({isMultiple:y,elements:m,operand:h,value:g});for(var w=0;w<m.length;w++){var b=m[w],E=void 0;switch(l(b)){case"checkbox":case"radio":E="click";break;case"select":case"date":E="change";break;default:E="keyup"}b.addEventListener(E,function(){return t.dispatchEvent(n())})}}a.set(t,{rule:i,targets:c}),t.addEventListener(r,o),t.dispatchEvent(n())};for(var p in f){d(p)}}}();