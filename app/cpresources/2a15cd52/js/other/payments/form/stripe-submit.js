"use strict";!function(){var e,t,r,n,a,o="#VARIABLES#",c=o.id,i=o.formAnchor,d=o.currencySelector,m=o.amountSelector,u=o.publicKey,s=o.usage,l=document.querySelector('form[data-id="'.concat(i,'"]')),f=!1;if(!l||!l.freeform)return console.error("Could not attach payments to Freeform plugin"),!1;l.freeform.setOption("ajax",!0),l.freeform.addOnSubmitCallback(function(t,n){if(l.freeform.lockSubmit(),l.freeform._removeMessages(),!Freeform.paymentsScript)return console.log("Stripe scripts not loaded yet"),l.freeform.unlockSubmit(),!1;if(f)return!0;var a=document.getElementById(c);return"single_use"===s?e.createPaymentMethod("card",r,{}).then(function(e){return e.error?v(e.error.message):(a.value=e.paymentMethod.id,f=!0,void l.dispatchEvent(y("submit")))}):e.createToken(r).then(function(e){return e.error?v(e.error.message):(a.value=e.token.id,f=!0,void l.dispatchEvent(y("submit")))}),!1}),l.freeform.addOnAfterAjaxSubmit(function(t,n,a){if(a.actions){var o=document.getElementById(c);a.actions.forEach(function(t){if("stripe.single_payment.payment_intent_action"===t.name){var a=t.metadata.payment_intent;o.value=a.id,e.handleCardAction(a.client_secret,r,{}).then(function(e){return e.error?(f=!1,v(e.error.message)):void n.dispatchEvent(y("submit"))})}if("stripe.subscription.payment_intent_action"===t.name){var c=t.metadata,i=c.subscription,d=c.payment_intent;o.value=i.id,e.handleCardPayment(d.client_secret,r,{}).then(function(e){return e.error?(f=!1,v(e.error.message)):void n.dispatchEvent(y("submit"))})}})}});var v=function(e){return l.freeform._renderFormErrors([e]),l.freeform.unlockSubmit(),!1};l.addEventListener("reset",function(){r&&r.clear(),a&&a.clear(),n&&n.clear()},!1);var p=function(){var o=c+"_card_number",i=c+"_card_cvc",s=c+"_card_expiry",v=document.getElementById(o),p=document.getElementById(i),h=document.getElementById(s),E=v.attributes.placeholder,b=h.attributes.placeholder,g=p.attributes.placeholder,_=y("freeform-stripe-styling");_.detail={},l.dispatchEvent(_);var S=_.detail;e=Stripe(u),t=e.elements(),r=t.create("cardNumber",{placeholder:E?E.value:"",style:S}),n=t.create("cardExpiry",{placeholder:b?b.value:"",style:S}),a=t.create("cardCvc",{placeholder:g?g.value:"",style:S}),r.mount("#"+o),n.mount("#"+s),a.mount("#"+i);var k=function(){f=!1};if(r.on("change",k),n.on("change",k),a.on("change",k),m){var A=form.querySelector(m);A&&A.addEventListener("change",k)}if(d){var B=form.querySelector(d);B&&B.addEventListener("change",k)}},y=function(e){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"function"==typeof Event?t=new Event(e,{bubbles:r,cancelable:n}):(t=document.createEvent("Event"),t.initEvent(e,!0,!0)),t};if(Freeform.paymentsScript)Freeform.paymentsScript.addEventListener("load",p);else{var h=document.createElement("script");h.addEventListener("load",p),h.src="https://js.stripe.com/v3/",document.body.appendChild(h),Freeform.paymentsScript=h}}();